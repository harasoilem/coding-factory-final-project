<div class="sticky top-0 z-10">
  <app-menu></app-menu>
</div>

<div class="flex-auto">
  <div style="max-width: 1600px" class="container mx-auto mt-[60px]">
    <div class="flex flex-wrap ">
      <mat-card appearance="outlined" class="w-full">
        <mat-card-header class="pb-4">
          <mat-card-title *ngIf="this.isAddNew">Add New Patient Info</mat-card-title>
          <mat-card-title *ngIf="!this.isAddNew && patient.id">Id {{patient.id}}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="flex flex-wrap m-1">

            <app-dynamic-form-field *ngFor="let field of fields" [form]="dynamicForm"
                                    [field]="field" [ngClass]="field.classes"
                                    [readonly]="this.loading"></app-dynamic-form-field>

          </div>
        </mat-card-content>
        <mat-card-footer>
          <div class="flex flex-wrap  mb-4 mt-3 ml-0 mr-2">
            <div class="w-3/4"></div>
            <div class="w-1/4 px-4">
            <app-flat-button class="float-right" extraClasses="bg-nurse-app-pink-dark"
                             data-test="save-patient-button" label="ΑΠΟΘΗΚΕΥΣΗ"
                             (click)="onSave()" [isLoading]="loading"></app-flat-button>
            </div>
          </div>
        </mat-card-footer>
      </mat-card>

      <div *ngIf="!isAddNew" class="w-full mt-5 mb-5">
        <app-card-table [addNewUrl]="'/patient-report/add/'+patient.id"
                        [infoIcon]="infoIcon"
                        [infoUrl]="'/patient-report/'"
                        [columns]="patientReportsTableColumns"
                        [displayedColumns]="patientReportsTableColumnNames"
                        [name]="'Patient Report'"
                        [tableDataSource]="patientReportsDataSource"
                        data-test="patient-patient-report-list"
        ></app-card-table>
      </div>


    </div>
  </div>
</div>
